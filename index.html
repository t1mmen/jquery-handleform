<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>$.handleForm()</title>
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="http://twitter.github.com/bootstrap/1.4.0/bootstrap.css" rel="stylesheet">
    <link href="http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.css" rel="stylesheet">
    

    <style type="text/css">
      body {
        padding-top: 60px !important;
      }
    </style>
    
	<script type="text/javascript">
	
	  var _gaq = _gaq || [];
	  _gaq.push(['_setAccount', 'UA-27356322-1']);
	  _gaq.push(['_trackPageview']);
	
	  (function() {
	    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	  })();
	
	</script>
  </head>

  <body>

    <div class="container">

      <!-- Main hero unit for a primary marketing message or call to action -->
      <div class="hero-unit">
        <h1>$.handleForm() <small>is..</small></h1>
        <p>… a simple jQuery plugin that submits your forms with $.ajax(), without the hassle.</p>
        <p>
        
        	<div class="pull-left">
			
				<a class="btn primary" href="https://github.com/t1mmen/jquery-handleform">Download on GitHub &raquo;</a> 
				<a class="btn success disabled" href="https://github.com/t1mmen/jquery-handleform">Try the demo &raquo;</a>
	 	
        	</div>
        
        	<div class="pull-left" style="padding-left: 20px; margin-top: 5px;">
	        	<iframe src="http://markdotto.github.com/github-buttons/github-btn.html?user=t1mmen&repo=jquery-handleform&type=watch&count=true"  allowtransparency="true" frameborder="0" scrolling="0" width="100px" height="20px"></iframe>  
	        	<iframe src="http://markdotto.github.com/github-buttons/github-btn.html?user=t1mmen&repo=jquery-handleform&type=fork&count=true"  allowtransparency="true" frameborder="0" scrolling="0" width="110px" height="20px"></iframe>           	
        	</div>
        
        	
        </p>
      </div>

	<div class="row">
		<div class="span4 columns">
		
			<h4>$.handleForm() is also..</h4>
	
			<p>
				Build specifically for use with Twitter's excellent Bootstrap CSS/JS framework.
			</p>
			<p>
				It's flexibility, buildt with server-side validation in mind.
			</p>

		
		</div>
		<div class="span4 columns">
		
			<h4>It's so pretty!</h4>
	
			<p>
				Coupled with <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a>, it makes it <strong>super easy</strong> to have functional, beautiful <strong>ajaxified forms</strong> interact with your backend of choice.
			</p>
		
		</div>
		<div class="span4 columns">
		
			<h4>CakePHP you say?</h4>
	
			<p>
				Ajax based forms with the <a href="http://www.cakephp.org" target="_blank">CakePHP</a> framework used to drive me nuts <i>and</i> make me hate the <code>$validate</code> array.
				<br><br>
				Well, not anymore.
			</p>
		
		</div>
		<div class="span4 columns">
		
			<h4>But I don't eat cake</h4>
	
			<p>
				No worries, a little PHP <code>json_encode()</code> (or similar) trickery on the backend should get you up and running. 
			</p>
		
		</div>
	
	</div>
	
	
	
	
	
	
	
	
	

	<div class="row" style="margin-top: 50px">
	
	
		<div class="span4 columns">
			<h2>Installation</h2>
			<p>Just add <code>jquery.handleform.js</code> to your existing script list (after jQuery, of course)</p>
			
		</div>
	
		<div class="span12 columns">
		
		
<pre class="prettyprint linenums lang-html">
&#060;script src="path/to/jquery.js"&#062;&#060;/script&#062;
&#060;script src="path/to/jquery.handleform.js"&#062;&#060;/script&#062;
&#060!-- Might I recommend Twitter's Bootstrap too? --&#062;
&#060;link href="path/to/bootstrap.css" rel="stylesheet"&#062;
</pre>

				<span class="help-block">No, you don't NEED Bootstrap, but you'll want to implement the CSS classes the script uses to make things look non-ugly.</span>
			
		</div>
	</div>
	
	
	
	<div class="row" style="margin-top: 50px">
	
	
		<div class="span4 columns">
			<h2>Using it</h2>
			.. is pretty simple. 
		</div>
	
		<div class="span12 columns">
		
		
		
<pre class="prettyprint linenums lang-js">
$(function() {
	$('#my_form').handleForm(); // That's it!
});
</pre>

			<p>
				While no options are required, it won't be as exciting, obviously.
	
				Sure, you'll get a pretty message saying how the FORM request panned out, but that'll only get you so far.
			</p>
			<br>
			<div class="page-header">
				<h4>So you want the options? <small>You can't hand.. err, I mean, sure, here are the defaults:</small></h4>
			</div>
		
<pre class="prettyprint linenums lang-js">
$(selector).handleForm({

	// on submit, blur, change, etc.
	trigger : 'submit', 
	
	// Slide in/out errors & messages
	transitionTime : 250,
	
	// What should the submit button text read while working?
	loadingText : 'Saving…',
	
	// What DOM element should the response be placed in?
	target : false,
	
	// How do you want the response placed in the target?
	targetMethod : 'replaceWith', 
	
	// Using Bootstrap's modal script? This one's for you:
	closeModal : false, 
	
	// What should the success message read?
	successMessage : 'Great success!',  
	
	// Or perhaps, forward to another URL when successful?
	successUrl : false,
	
	// Give the successMessage some screentime before moving on? (in ms)
	successUrlDelay : 0,
	
	// Where should the successMessage be shown?
	// If you don't specifym the $.handleForm() will .append it to your $(selector)
	successContainer : '.success-message-container', 
	
	// When things go wrong, what should we tell the user?
	errorMessage : 'Uh oh, something went wrong skipper:',
	
	// .. and with what (bootstrap) alert-message class? 
	errorClass : 'warning',
	
	// When requests go sideways, place the errorMessage in...
	errorContainer : '.error-message-container', 
	
	// Send the user somewhere else if the request fails?
	errorUrl : false, 
	
	/*
	 Ah, the callbacks. These are pretty self explanatory. 
	 ie. onSuccess : function(data) { alert('Look ma, I got me some ' + data); }
	 
	 Also of note: var handleFormOptions.optionname are available in the callbacks.
	*/
		
	// Specific when recieving a JSON response
	onJsonSuccess : false, 
	
	// Always run on successful request.
	onSuccess : false,
	
	// Always run on unsuccessful request.
	onError : false,
});
</pre>		
		
		</div>
	</div>
	
	
	
	
	
	
	
	
	

	<div class="row" style="margin-top: 50px">
	
	
		<div class="span4 columns">
			<h2>Backend</h2>
			is exactly this easy:
		</div>
	
	
		<div class="span12 columns">		

		<p>
			For validation error messages, add this to your <code>Controller</code>'s <code>action()</code>:
		</p>
			
<pre class="prettyprint linenums lang-php">
if($this->Modelname->invalidFields()) {
	header('Content-type: application/json');
	$this->autoRender = false;
	$response = array('validationErrors' => $this->Temp->invalidFields());
	echo json_encode($response);
	exit();
}	
</pre>
	
	<p>Yes, we're breaking the MVC a bit. A smoother solution would be to move this into a Component and trigged this on beforeRender() or similar, and render an actual json view. I'll leave that up to you guys for now.</p>
	
	<ul class="">
	<h3>Any other backend <small>can respond with something like this</small></h3>

<pre class="prettyprint linenums lang-json">
{"validationErrors":
	{"username":["You must supply a username"]}
}	
</pre>
	<span class="help-block">Notice the peculiar formatting for the username object. That's because of CakePHP's insistence on sending us three validation errors per field. Maybe I'll clean that up in the future. </span>
	</ul>
			
		</div>
		
	</div>
	
	
	
	
	
	
	
	
	
	
	
	
	
	
	

	<div class="row" style="margin-top: 50px">
	
	
		<div class="span4 columns">
			<h2>A heads up</h2>
			<p>
	If you want to make CakePHP forms look nicer in Bootstrap (and also, make error messages appear properly), try something this when creating your forms:
			</p>
		</div>
	
	
		<div class="span12 columns">		


<pre class="prettyprint linenums lang-php">
echo $this->Form->create('Modelname', array(
	'class' => 'form-stacked',
	'inputDefaults' => array(
		'div' => 'clearfix',
		'between' => '&#060;div class="input"&#062;',
		'after' => '&#060;/div&#062;',
    )
));	
</pre>

		<p>
			<strong>Note:</strong> This will probably break havoc on your radio/checkboxes and stuff.
		</p>

	
		</div>
	</div>




      <footer>
        <p>&copy; <a href="https://twitter.com/#!/t1mmen">@t1mmen</a> 2011</p>
      </footer>

    </div> <!-- /container -->


    <!-- Le javascript -->
    <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
    <script src="http://twitter.github.com/bootstrap/assets/js/google-code-prettify/prettify.js"></script>
    <script>$(function () { prettyPrint() })</script>
    

	
    <script src="js/jquery.handleform.js"></script>
	<script>

    $(document).ready(function() {
    	
    	$('#sampleForm').handleForm({
    		cakephpModel : 'Temp',

    	
    	});
    	
    
    });
    	
	</script>
    
  </body>
</html>
